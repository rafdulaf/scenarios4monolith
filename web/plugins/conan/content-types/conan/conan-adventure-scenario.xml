<?xml version="1.0" encoding="UTF-8"?>
<extension class="org.ametys.cms.contenttype.DefaultContentType">
    <content-type extends="conan-reference-adventure-scenario">
        <label i18n="true">CONTENT_TYPES_CONAN_ADVENTURE_SCENARIO_LABEL</label>
        <description i18n="true">CONTENT_TYPES_CONAN_ADVENTURE_SCENARIO_DESC</description>
        <default-title i18n="true">CONTENT_TYPES_CONAN_ADVENTURE_NEW</default-title>
        <icons>
            <glyph>ametysicon-document209</glyph>
        </icons>

        <right>Right_ContentType_Conan_Adventure_Scenario_Create</right>
        
        <repeater name="introductions" initial-size="1" min-size="1">
            <label i18n="true">CONTENT_TYPES_CONAN_ADVENTURE_SCENARIO_INTRODUCTIONS</label>
            <description i18n="true">CONTENT_TYPES_CONAN_ADVENTURE_SCENARIO_INTRODUCTIONS_DESC</description>
            <add-label i18n="true">CONTENT_TYPES_CONAN_ADVENTURE_SCENARIO_INTRODUCTIONS_ADD</add-label>
            <del-label i18n="true">CONTENT_TYPES_CONAN_ADVENTURE_SCENARIO_INTRODUCTIONS_REMOVE</del-label>
            <header-label>{language}</header-label>
            
            <attribute name="language" type="string">
                <label i18n="true">CONTENT_TYPES_ABSTRACT_REFERENCE_SCENARIO_INTRODUCTIONS_LANGUAGE</label>
                <description i18n="true">CONTENT_TYPES_ABSTRACT_REFERENCE_SCENARIO_INTRODUCTIONS_LANGUAGE_DESC</description>
                <enumeration>
                    <custom-enumerator class="org.ametys.cms.languages.LanguageEnumerator"/>
                </enumeration>
                <validation>
                    <mandatory />
                </validation>
            </attribute>
            <attribute name="introduction" type="rich-text">
                <label i18n="true">CONTENT_TYPES_CONAN_ADVENTURE_SCENARIO_INTRODUCTIONS_INTRODUCTION</label>
                <description i18n="true">CONTENT_TYPES_CONAN_ADVENTURE_SCENARIO_INTRODUCTIONS_INTRODUCTION_DESC</description>
                <validation>
                   <mandatory />
                </validation>
                <widget-params>
                    <param name="height">150</param>
                </widget-params>
            </attribute>
        </repeater>

        <repeater name="objectives" initial-size="1" min-size="1">
            <label i18n="true">CONTENT_TYPES_CONAN_ADVENTURE_SCENARIO_OBJECTIVES</label>
            <description i18n="true">CONTENT_TYPES_CONAN_ADVENTURE_SCENARIO_OBJECTIVES_DESC</description>
            <add-label i18n="true">CONTENT_TYPES_CONAN_ADVENTURE_SCENARIO_OBJECTIVES_ADD</add-label>
            <del-label i18n="true">CONTENT_TYPES_CONAN_ADVENTURE_SCENARIO_OBJECTIVES_REMOVE</del-label>
            <header-label>{language}</header-label>
           
            <attribute name="language" type="string">
                <label i18n="true">CONTENT_TYPES_CONAN_ADVENTURE_SCENARIO_OBJECTIVES_LANGUAGE</label>
                <description i18n="true">CONTENT_TYPES_CONAN_ADVENTURE_SCENARIO_OBJECTIVES_LANGUAGE_DESC</description>
                <enumeration>
                    <custom-enumerator class="org.ametys.cms.languages.LanguageEnumerator"/>
                </enumeration>
                <validation>
                    <mandatory />
                </validation>
            </attribute>
            <attribute name="heroes" type="rich-text">
                <label i18n="true">CONTENT_TYPES_CONAN_ADVENTURE_SCENARIO_OBJECTIVES_HEROES</label>
                <description i18n="true">CONTENT_TYPES_CONAN_ADVENTURE_SCENARIO_OBJECTIVES_HEROES_DESC</description>
                <validation>
                   <mandatory />
                </validation>
                <widget-params>
                    <param name="height">80</param>
                </widget-params>
            </attribute>
            <attribute name="overlord" type="rich-text">
                <label i18n="true">CONTENT_TYPES_CONAN_ADVENTURE_SCENARIO_OBJECTIVES_OVERLORD</label>
                <description i18n="true">CONTENT_TYPES_CONAN_ADVENTURE_SCENARIO_OBJECTIVES_OVERLORD_DESC</description>
                <validation>
                   <mandatory />
                </validation>
                <widget-params>
                    <param name="height">80</param>
                </widget-params>
            </attribute>
        </repeater>

        <attribute name="side" type="boolean">
            <label i18n="true">CONTENT_TYPES_CONAN_ADVENTURE_SCENARIO_SIDE</label>
            <description i18n="true">CONTENT_TYPES_CONAN_ADVENTURE_SCENARIO_SIDE_DESC</description>
            <validation>
                <mandatory />
            </validation>
            <enumeration>
                <entry>
                    <label i18n="true">CONTENT_TYPES_CONAN_ADVENTURE_SCENARIO_SIDE_HEROES</label>
                    <value>true</value>
                </entry>
                <entry>
                    <label i18n="true">CONTENT_TYPES_CONAN_ADVENTURE_SCENARIO_SIDE_OVERLORD</label>
                    <value>false</value>
                </entry>
            </enumeration>
        </attribute>

        <attribute name="strain" type="long">
            <label i18n="true">CONTENT_TYPES_CONAN_ADVENTURE_SCENARIO_STRAIN</label>
            <description i18n="true">CONTENT_TYPES_CONAN_ADVENTURE_SCENARIO_STRAIN_DESC</description>
            <validation>
                <mandatory />
            </validation>
            <default-value>0</default-value>
        </attribute>

        <repeater name="configurations" initial-size="1" min-size="1">
            <label i18n="true">CONTENT_TYPES_CONAN_ADVENTURE_SCENARIO_CONFIGURATIONS</label>
            <description i18n="true">CONTENT_TYPES_CONAN_ADVENTURE_SCENARIO_CONFIGURATIONS_DESC</description>
            <add-label i18n="true">CONTENT_TYPES_CONAN_ADVENTURE_SCENARIO_CONFIGURATIONS_ADD</add-label>
            <del-label i18n="true">CONTENT_TYPES_CONAN_ADVENTURE_SCENARIO_CONFIGURATIONS_REMOVE</del-label>
            <header-label>{title}</header-label>
            
            <attribute name="title" type="string">
                <label i18n="true">CONTENT_TYPES_CONAN_ADVENTURE_SCENARIO_CONFIGURATIONS_TITLE</label>
                <description i18n="true">CONTENT_TYPES_CONAN_ADVENTURE_SCENARIO_CONFIGURATIONS_TITLE_DESC</description>
            </attribute>
            <repeater name="heroes" initial-size="1" min-size="1">
                <label i18n="true">CONTENT_TYPES_CONAN_ADVENTURE_SCENARIO_CONFIGURATIONS_HEROES</label>
                <description i18n="true">CONTENT_TYPES_CONAN_ADVENTURE_SCENARIO_CONFIGURATIONS_HEROES_DESC</description>
                <add-label i18n="true">CONTENT_TYPES_CONAN_ADVENTURE_SCENARIO_CONFIGURATIONS_HEROES_ADD</add-label>
                <del-label i18n="true">CONTENT_TYPES_CONAN_ADVENTURE_SCENARIO_CONFIGURATIONS_HEROES_REMOVE</del-label>
                <header-label>{name}</header-label>
                
                <attribute name="optional" type="boolean">
                    <label i18n="true">CONTENT_TYPES_CONAN_ADVENTURE_SCENARIO_CONFIGURATIONS_HEROES_OPTIONAL</label>
                    <description i18n="true">CONTENT_TYPES_CONAN_ADVENTURE_SCENARIO_CONFIGURATIONS_HEROES_OPTIONAL_DESC</description>
                </attribute>
                <attribute name="name" type="content" contentType="conan-hero">
                    <label i18n="true">CONTENT_TYPES_CONAN_ADVENTURE_SCENARIO_CONFIGURATIONS_HEROES_NAME</label>
                    <description i18n="true">CONTENT_TYPES_CONAN_ADVENTURE_SCENARIO_CONFIGURATIONS_HEROES_NAME_DESC</description>
                    <validation>
                        <mandatory />
                    </validation>
                    <widget>edition.select-referencetable-content</widget>
                </attribute>
                <attribute name="equipments" type="content" contentType="conan-equipment" multiple="true">
                    <label i18n="true">CONTENT_TYPES_CONAN_ADVENTURE_SCENARIO_CONFIGURATIONS_HEROES_EQUIPMENTS</label>
                    <description i18n="true">CONTENT_TYPES_CONAN_ADVENTURE_SCENARIO_CONFIGURATIONS_HEROES_EQUIPMENTS_DESC</description>
                    <widget>edition.select-referencetable-content</widget>
                </attribute>
                <attribute name="spells" type="content" contentType="conan-spell" multiple="true">
                    <label i18n="true">CONTENT_TYPES_CONAN_ADVENTURE_SCENARIO_CONFIGURATIONS_HEROES_SPELLS</label>
                    <description i18n="true">CONTENT_TYPES_CONAN_ADVENTURE_SCENARIO_CONFIGURATIONS_HEROES_SPELLS_DESC</description>
                    <widget>edition.select-referencetable-content</widget>
                </attribute>
                <attribute name="tiles" type="content" contentType="conan-tile" multiple="true">
                    <label i18n="true">CONTENT_TYPES_CONAN_ADVENTURE_SCENARIO_CONFIGURATIONS_HEROES_TILES</label>
                    <description i18n="true">CONTENT_TYPES_CONAN_ADVENTURE_SCENARIO_CONFIGURATIONS_HEROES_TILES_DESC</description>
                    <widget>edition.select-referencetable-content</widget>
                </attribute>
                <attribute name="text" type="multilingual-string">
                    <label i18n="true">CONTENT_TYPES_CONAN_ADVENTURE_SCENARIO_CONFIGURATIONS_HEROES_TEXT</label>
                    <description i18n="true">CONTENT_TYPES_CONAN_ADVENTURE_SCENARIO_CONFIGURATIONS_HEROES_TEXT_DESC</description>
                </attribute>
            </repeater>
        </repeater>
                
        <view name="main" override="true">
            <item ref="introductions/*" order-before="image" group="general"/>
            <item ref="side" group="general"/>
            <item ref="objectives/*" group="general"/>
            
            <group role="tab" order-after="general">
                <label i18n="true">CONTENT_TYPES_CONAN_ADVENTURE_SCENARIO_TAB_HEROES</label>
                
                <item ref="strain"/>
                <item ref="configurations/*"/>
            </group>
        </view>
    </content-type>
</extension>
